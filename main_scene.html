<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶å…‰èœè°± - ä¸»æ¸¸æˆåœºæ™¯</title>
    <link rel="stylesheet" href="main_scene.css">
</head>
<body>
    <div class="game-container">
        <!-- é¡¶éƒ¨ä¿¡æ¯æ  -->
        <header class="game-header">
            <div class="level-info">
                <h1 id="level-name">åŠ è½½ä¸­...</h1>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <span class="progress-text" id="progress-text">0%</span>
                </div>
            </div>
            <div class="header-controls">
                <button class="recipe-btn" id="recipe-btn" title="æŸ¥çœ‹é£Ÿè°±">
                    ğŸ“– é£Ÿè°±
                </button>
                <button class="toggle-kitchen-btn" id="toggle-kitchen-btn" title="éšè—/æ˜¾ç¤ºå¨æˆ¿èƒŒæ™¯">
                    ğŸ‘ï¸
                </button>
                <div class="timer">
                    <span id="timer-display">--:--</span>
                </div>
            </div>
        </header>

        <!-- ä¸»æ¸¸æˆåŒºåŸŸ -->
        <main class="game-main">
            <!-- å·¦ä¾§å¨æˆ¿èƒŒæ™¯ -->
            <section class="kitchen-area" id="kitchen-area">
                <img src="assets/kitchenbg.png" alt="å¨æˆ¿èƒŒæ™¯" class="kitchen-bg">
            </section>

            <!-- å³ä¾§æ“ä½œåŒºåŸŸ -->
            <section class="game-interface">
                <!-- é£ŸæåŒºåŸŸ -->
                <div class="ingredients-section">
                    <h2>ğŸ¥¬ å¯ç”¨é£Ÿæ</h2>
                    <div class="ingredients-grid" id="ingredients-grid">
                        <!-- åŠ¨æ€ç”Ÿæˆé£Ÿæå¡ç‰‡ -->
                    </div>
                </div>

                <!-- å¨å…·åŒºåŸŸ -->
                <div class="tools-section">
                    <h2>ğŸ³ å¨å…·</h2>
                    <div class="tools-grid" id="tools-grid">
                        <!-- åŠ¨æ€ç”Ÿæˆå¨å…· -->
                    </div>
                </div>

                <!-- æ“ä½œåŒºåŸŸ -->
                <div class="cooking-area">
                    <h2>ğŸ”¥ çƒ¹é¥ªåŒº</h2>
                    <div class="cooking-controls">
                        <button id="start-all-cooking-btn" class="start-cooking-btn">å¼€å§‹å…¨éƒ¨çƒ¹é¥ª</button>
                    </div>
                    <div class="cooking-surface" id="cooking-surface" style="display: none;">
                        <p class="drop-hint">å°†é£Ÿææ‹–æ‹½åˆ°å¨å…·ä¸­å¼€å§‹çƒ¹é¥ª</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- æ‚¬åœæç¤º -->
    <div class="tooltip" id="tooltip" style="display: none;">
        <div class="tooltip-content"></div>
    </div>

    <!-- é¢„å¯¹è¯å±‚ - æ˜¾ç¤ºåœ¨å·¦ä¾§å¨æˆ¿åŒºåŸŸä¸‹æ–¹ -->
    <div class="predialog-layer" id="predialog-layer" style="display: none;">
        <div class="character-photo-full">
            <img id="character-image-full" src="" alt="è§’è‰²ç…§ç‰‡">
        </div>
        <div class="dialog-box-bottom">
            <div class="character-name-bottom" id="character-name-bottom">è§’è‰²å</div>
            <div class="dialog-content-bottom" id="dialog-content-bottom">å¯¹è¯å†…å®¹</div>
        </div>
    </div>

    <!-- å…³å¡ç›®æ ‡æ¨¡æ€æ¡† -->
    <div class="goals-modal" id="goals-modal" style="display: none;">
        <div class="goals-modal-content">
            <h2>ğŸ¯ å…³å¡ç›®æ ‡</h2>
            <div class="goals-list" id="goals-list">
                <!-- åŠ¨æ€ç”Ÿæˆç›®æ ‡åˆ—è¡¨ -->
            </div>
            <div class="goals-time-limit">
                <span>â±ï¸ æ—¶é—´é™åˆ¶ï¼š</span>
                <span id="goals-time-display">--:--</span>
            </div>
            <button class="goals-start-btn" id="goals-start-btn">å¼€å§‹æ¸¸æˆ</button>
        </div>
    </div>

    <!-- é£Ÿè°±æ¨¡æ€æ¡† -->
    <div class="recipe-modal" id="recipe-modal" style="display: none;">
        <div class="recipe-modal-content">
            <div class="recipe-modal-header">
                <h2>ğŸ“– å·²è§£é”é£Ÿè°±</h2>
                <button class="close-btn" id="close-recipe-modal">&times;</button>
            </div>
            <div class="recipe-list" id="recipe-list">
                <!-- åŠ¨æ€ç”Ÿæˆé£Ÿè°±å¡ç‰‡ -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/dist/typed.umd.js"></script>
    <script>
        // Typed.js CDNåŠ è½½å¤±è´¥çš„å¤‡ç”¨æ–¹æ¡ˆ
        if (typeof Typed === 'undefined') {
            console.warn('CDNåŠ è½½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æœ¬åœ°Typed.js');
            // åˆ›å»ºæœ¬åœ°scriptæ ‡ç­¾ä½œä¸ºå¤‡ç”¨
            const script = document.createElement('script');
            script.src = 'node_modules/typed.js/dist/typed.umd.js';
            script.onerror = function() {
                console.warn('æœ¬åœ°Typed.jsåŠ è½½å¤±è´¥ï¼Œå°†ä½¿ç”¨æ–‡æœ¬æ˜¾ç¤ºæ¨¡å¼');
                // å®šä¹‰ä¸€ä¸ªç©ºçš„Typedæ„é€ å‡½æ•°ï¼Œé˜²æ­¢åç»­ä»£ç æŠ¥é”™
                window.Typed = function() {
                    console.warn('Typed.jsæœªåŠ è½½ï¼Œä½¿ç”¨å¤‡ç”¨æ–‡æœ¬æ˜¾ç¤º');
                    return {
                        destroy: function() {},
                        stop: function() {}
                    };
                };
            };
            document.head.appendChild(script);
        }
    </script>
    <script src="main_scene.js"></script>
</body>
</html>